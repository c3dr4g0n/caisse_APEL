<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<meta name="theme-color" content="#FF9800">
		<title>Caisse APEL - ACCUEIL</title>
		<link rel="stylesheet" href="style.css" />
		<link rel="manifest" href="manifest.json" />
		<link rel="icon" sizes="192x192" href="images/icone_192.png" />
		<style>
			.accueil_bloc{
				display:flex;
				flex-direction:column;
				align-items:center;
				justify-content:center;
				min-height:80vh;
			}
			
			.accueil_bloc button{
				width:80%;
				max-width:400px;
				margin:15px 0;
				padding:30px;
				font-size:1.5rem;
			}
		</style>
	</head>
	<body>
		<h1>Caisse APEL - ACCUEIL</h1>
		<h2 id="version"></h2>
		<div class="accueil_bloc">
			<h2>Choisissez votre caisse :</h2>
			<button onclick="window.location.href='caisse_alimentation.html'" style="background:#4caf50;color:white;">Alimentation</button>
			<button onclick="window.location.href='caisse_marche_de_noel.html'" style="background:#1565c0;color:white;">Marché de Noël</button>
			<button onclick="window.location.href='fond_de_caisse.html'" style="background:#9c27b0;color:white;">Fond de caisse</button>
		</div>
		<script>
			if("serviceWorker" in navigator){
				navigator.serviceWorker
					.register("sw.js")
					.then(() => {
						console.log("Service Worker enregistré");
						
						navigator.serviceWorker.addEventListener("message", (event) => {
							if (event.data?.version) {
								document.getElementById("version").textContent = "Version " + event.data.version;
							}
						});
						
						if (navigator.serviceWorker.controller) {
							navigator.serviceWorker.controller.postMessage("getVersion");
						}
					})
					.catch(err => console.error("Erreur du Service Worker : ", err));
			}
		</script>
	</body>
</html>